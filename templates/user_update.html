{% extends "base.html" %}

{% block title %}
    User Update
{% endblock %}

{% block content %}

{% for message in get_flashed_messages() %}
    <div class="alert alert-warning alert-dismissible fade show" role="alert">        
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
{% endfor %}

<!-- <h1>your id:{{ users_to_update.id }}<br>
current id:{{ current_user.id }}</h1> -->

{% if users_to_update.id == current_user.id %}

    <h1>{{ users_to_update.name }} User Update</h1><br>

    <div class="shadow p-3 mb-5 bg-body rounded">
        <form action="/user/update/{{ users_to_update.id }}" method="POST" enctype="multipart/form-data"> 
            {{ form.hidden_tag() }}

            {{ form.name.label(class="form-label") }} 

            {{ form.name(class="form-control", value=users_to_update.name) }}<br>

            {{ form.email.label(class="form-label") }} 

            {{ form.email(class="form-control", value=users_to_update.email) }}<br>
            
            {{ form.username.label(class="form-label") }} 

            {{ form.username(class="form-control", value=users_to_update.username) }}<br>

            {{ form.phone_number.label(class="form-label") }} 

            {{ form.phone_number(class="form-control", value=users_to_update.phone_number) }}<br>

            {{ form.about_author.label(class="form-label") }} 

            <textarea name="about_author" class="form-control">
                {{ users_to_update.about_author }}
            </textarea>

            {{ form.profile_pic.label(class="form-label") }} 

            {{ form.profile_pic(class="form-control", value=users_to_update.profile_pic) }}<br>

            {{ form.submit(class="btn btn-dark") }}

            <a class="btn btn-danger" href="{{ url_for('user_delete', id = users_to_update.id) }}"> Delete</a> 
            
            <br>

        </form>
    </div>

{% else %}
    <h1>you are not allowed to update this user</h1>
{% endif %}

{% endblock %}

